<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>管理后台</title>
    <!--引入BootStrap的样式，提供了大量的样式-->
    <link rel="stylesheet" href="/static/bootstrap-3.4.1-dist/css/bootstrap.min.css">

    <style>
        .body {
            font-size: 14px;
            line-height: 2.42857143;
        }
        .container {
            margin: 0 auto;
            margin-top: 35vh;
            width:30vw;
        }
    </style>
</head>
<body>
<form id="edit_form" class="container">
    <h3>修改环境信息</h3>
    <div class="form-group">
        <label for="exampleInputEmail1" class="body">环境 ID</label>
        <input type="text" class="form-control" id="id" placeholder="id" name="id" readOnly="true" value={{ env_info.id }}>
    </div>
    <div class="form-group">
        <label for="exampleInputPassword1" class="body">环境名称</label>
        <input type="text" class="form-control" id="name" placeholder="环境" name="name" value={{ env_info.name }}>
    </div>
    <button type="button" class="btn btn-default" >
        <a id="ajax_edit_submit" >提交</a>
    </button>
    <button type="submit" class="btn btn-default">
        <a href="{% url 'url_ops' %}">取消</a>
    </button>
</form>

<script src="/static/jquery-1.12.4.js"></script>
<!--引入BootStrap的js，提供了一些动态效果。注意：必须先引入jQuery-->
<script src="/static/bootstrap-3.4.1-dist/js/bootstrap.js"></script>
<script>
    $(function () {
        $('#ajax_edit_submit').click(function () {

            $.ajax({
                url: '{% url 'url_edit_env' env_info.id %}',
                type: 'POST',
                data: $('#edit_form').serialize(),
                dataType: 'JSON',
                traditional: true,
                success: function (data) {
                    console.log(data);
                    if(data.status){
                        location.href = '{% url 'url_ops' %}';
                    }else{
                        $('#error').text(data.error)
                        location.href = '{% url 'url_ops' %}';
                    }
                }
            })
        });
    })
</script>
</body>
</html>